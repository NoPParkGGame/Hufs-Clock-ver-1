/* --- 기본 레이아웃 --- */
body {
    font-family: "Noto Sans KR", sans-serif;
    margin: 0;
    width: 100vw;
    height: 100vh;
    padding: 20px;
    box-sizing: border-box;
    /* 하얀색 깜빡임 방지를 위한 기본 배경색 */
    background-color: #000;
}

/* --- 배경 이미지 로직 수정 --- */
/* 배경 이미지 공통 스타일 */
.background {
    position: fixed; /* position: absolute -> fixed 로 변경하여 스크롤과 무관하게 고정 */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1; /* body 배경색보다 위에, 콘텐츠보다는 아래에 위치 */
    background-size: cover;
    background-position: center;
    transition: opacity 1.5s ease-in-out; /* 전환 시간을 약간 늘려 더 부드럽게 */
}

/* 기본 테마일 때 보일 배경 */
.background.default {
    opacity: 0; /* 기본적으로 투명하게 */
}

/* 다크 테마일 때 보일 배경 */
.background.dark {
    opacity: 0; /* 기본적으로 투명하게 */
}

/* body 클래스에 따라 해당 배경만 보이도록 설정 (오류 수정) */
body.theme-default .background.default {
    opacity: 1;
}

body.theme-dark .background.dark {
    opacity: 1;
}


/* --- 버튼 스타일 리팩토링 --- */
/* 2. 모든 버튼의 공통 스타일 (중복 제거) */
.glass-button {
    /* 기본 모양 및 크기 */
    width: 80px;
    height: 80px;
    border-radius: 15px;
    font-size: 1.08em;
    text-shadow: var(--text-shadow);
    
    /* 폰트 및 커서 */
    font-family: "Noto Sans KR", sans-serif;
    font-weight: 800;
    font-size: 1.4em;
    color: white;
    cursor: pointer;

    /* 글래스모피즘 효과 */
    background: rgba(255, 255, 255, 0.07);
    backdrop-filter: blur(2px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    
    /* 부드러운 전환 효과 */
    transition: all 0.3s ease;
}

/* 개별 버튼 위치 설정 (컨테이너에서 분리) - 큰 버튼용, 필요 시 사용 */
.library-btn {
    position: fixed;
    bottom: 40px;
    right: 625px;
    z-index: 1000;
}

.eclass-btn {
    position: fixed;
    bottom: 40px;
    right: 720px;
    z-index: 1000;
}

.homepage-btn {
    position: fixed;
    bottom: 40px;
    right: 815px;
    z-index: 1000;
}

.jungsi-btn {
    position: fixed;
    bottom: 40px;
    right: 910px;
    z-index: 1000;
}

/* 3. 모든 버튼의 공통 호버(hover) 효과 */
.glass-button:hover {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    transform: translateY(-5px) scale(1.05);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

/* 팝업 효과: hidden 클래스 시 사라짐 */
.glass-button.hidden {
    opacity: 0;
    transform: scale(0.8);
    pointer-events: none;
    transition: all 0.1s ease;
}

/* 작은 바로가기 버튼 스타일 (바로가기 버튼과 동일) */
.small-glass-button {
    position: fixed;
    top: 30px;
    z-index: 1000;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: none;
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    border-radius: 8px;
    padding: 11px 16px;
    color: rgba(255, 255, 255, 0.9);
    font-family: "Noto Sans KR", sans-serif;
    font-size: 15px;
    font-weight: 800;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
    height: 45px;
}

/* 작은 버튼 위치 설정 (바로가기 버튼 왼쪽으로 펼쳐짐) */
.jungsi-btn {
    right: 465px; /* 바로가기 버튼 왼쪽, 간격 10px */
}

.homepage-btn {
    right: 550px; /* jungsi-btn 왼쪽 */
}

.eclass-btn {
    right: 650px; /* homepage-btn 왼쪽 */
}

.library-btn {
    right: 750px; /* eclass-btn 왼쪽 */
}

/* 작은 버튼 호버 효과 */
.small-glass-button:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 4px 16px rgba(31, 38, 135, 0.5);
}

/* 작은 버튼 hidden 효과 (오른쪽에서 왼쪽으로 슬라이드) */
.small-glass-button.hidden {
    opacity: 0;
    transform: translateX(5px);
    pointer-events: none;
}


/* 학식 토글 버튼 활성화 상태 */
.glass-button.active {
    background: rgba(255, 255, 255, 0.15);
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
}

/* 독립된 학식 토글 버튼 */
.meal-toggle-btn.floating {
    position: fixed;
    top: 30px;
    right: 210px;
    z-index: 1000;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: none;
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    border-radius: 8px;
    padding: 11px 16px;
    color: rgba(255, 255, 255, 0.9);
    font-family: "Noto Sans KR", sans-serif;
    font-size: 15px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
}

.meal-toggle-btn.floating:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 4px 16px rgba(31, 38, 135, 0.5);
}

.meal-toggle-btn.floating.active {
    background: rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    transform: translateY(-1px);
}

/* 바로가기 토글 버튼 (학식 버튼 왼쪽에 위치) */
.shortcut-toggle-btn.floating {
    position: fixed;
    top: 30px;
    right: 340px; /* 학식 버튼 right: 210px + 버튼 너비 ≈102px + 간격 20px */
    z-index: 1000;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: none;
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    border-radius: 8px;
    padding: 11px 16px;
    color: rgba(255, 255, 255, 0.9);
    font-family: "Noto Sans KR", sans-serif;
    font-size: 15px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
}

.shortcut-toggle-btn.floating:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 4px 16px rgba(31, 38, 135, 0.5);
}

.shortcut-toggle-btn.floating.active {
    background: rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    transform: translateY(-1px);
}